# ⚫ 웹 소켓 실시간 오목 프로젝트 - RE (Refactoring) ⚪
> 현재 java & ts 기반으로 리팩토링 중입니다.

## 🔧 리팩토링 전·후 기술 스택 및 아키텍처 변화
| 구분     | 리팩토링 전 (레거시)                        | 리팩토링 후 (목표)                                  | 강조되는 기술적 변화                             |
| ------ | ----------------------------------- | -------------------------------------------- | --------------------------------------- |
| 백엔드 코어 | Java, Servlet, JSP | Vanilla Java, Java WebSocket API | WebSocket 처리 로직에서 비즈니스 규칙을 분리하여 도메인 객체 중심의 객체지향 설계로 재구성 |
| 프론트엔드  | JavaScript, AJAX                    | TypeScript                                   | 동적 타입에서 정적 타입 시스템으로 전환 (안정성 및 유지보수성 향상) |
| 데이터베이스 | MariaDB                             | H2 Database (RDB), Redis (Cache/Messaging)   | 데이터 분리 전략 적용 (영속성 vs. 실시간 처리)           |
| 아키텍처   | Layered MVC (Controller/Service 중심) | Domain-Driven Design (DDD), Strategy Pattern | 비즈니스 도메인(omok, user) 중심의 고응집도 설계        |

## 🧠 리팩토링 전·후 역할 변화 및 핵심 목표
| 구분     | 리팩토링 전 주요 역할                    | 리팩토링 후 핵심 목표                                       |
| ------ | ------------------------------- |----------------------------------------------------|
| 오목 로직  | WinCheckController.java에서 승패 판정 | 전략 패턴을 활용한 **OmokRuleStrategy** 엔진 설계 (룰 확장성 확보)   |
| 실시간 처리 | JSP/AJAX와 웹소켓 혼재                | Redis Pub/Sub을 이용한 채팅·매칭 시스템 분리 및 성능 최적화           |
| 데이터 관리 | MariaDB에 모든 데이터 저장              | **H2 (RDB)** 와 Redis 간의 역할 명확히 분리 및 스키마 간소화        |
| 동시성 제어 | 일반적인 웹소켓 처리                     | 멀티스레딩 환경에서 **synchronized**를 사용한 게임 엔진의 스레드 안전성 확보 |
| 개발 환경  | 복잡한 WAS 설정 및 DB 연결              | H2 인메모리 사용으로 개발 환경 단순화 및 JUnit 테스트 용이성 확보          |

## 🎯 중점 기술 목표 3가지
1. TypeScript 기반 클라이언트 개발: 타입 시스템을 활용하여 서버-클라이언트 간 데이터 통신 규약을 엄격하게 정의하고 코드의 안정성 및 유지보수성을 향상
2. 웹소켓 기반 고성능 아키텍처: Redis Pub/Sub 패턴을 활용하여 실시간 채팅 및 매칭 시스템의 부하를 분산시키고, 확장 가능한 웹소켓 통신 구조를 설계
3. 멀티스레딩 환경의 동시성 제어: Java 웹소켓 서버의 멀티스레딩 환경에서 synchronized 및 동시성 컬렉션을 사용하여 공유 자원(게임 상태, 세션 목록)의 스레드 안전성을 확보하고, 임계 구역을 최소화